---
import "../index.css";
import { fetchSupportedLangs } from "../lib/sheets";
import MainLayout from "../layouts/MainLayout.astro";

const supportedLangs = await fetchSupportedLangs();
---

<MainLayout>
	<script is:inline define:vars={{ supportedLangs }}>
		const userLang = navigator.language.split("-")[0];
		const defaultCode = supportedLangs[0]?.code || "en";
		const langToRedirect = supportedLangs.find((l) => l.code === userLang)
			? userLang
			: defaultCode;

		window.location.replace(`/${langToRedirect}`);
	</script>
</MainLayout>
